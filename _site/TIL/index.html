<!DOCTYPE html>
<html>
  <head>
  <title>
    

      
        2020-06-06 현충일의 TIL

      

    
  </title>

  <meta charset="utf-8" />
<meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
<meta http-equiv='X-UA-Compatible' content='IE=edge'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>
<meta name="author" content="강병영" />


    <meta name="description" content="2020 6월 6일의 TIL.
" />
    <meta property="og:description" content="2020 6월 6일의 TIL.
" />



    <meta property="og:type" content="article">
    <meta property="og:title" content="강병영 - 2020-06-06 현충일의 TIL" />
    <meta property="og:url" content="http://localhost:4000/TIL/">
    <meta property="og:image" content="http://rokang.github.io/images/og_image.png">


<meta property="og:image:width" content="2400"/>
<meta property="og:image:height" content="1600"/>
<meta property="og:image:type" content="image/png">

<meta property="og:site_name" content="뱅캉 - cooool">

<meta name="google-site-verification" content="t8IGfCWvNUUkdB4LZkgdJozlUQ0CEkIcOtuiQV3qiQA" />
<meta name="google-site-verification" content="rMIHrIDY7gLS2tLF4Dq_mpy8-Z-dAQ-vaJlL5s5Mpe4" />
  <!-- Async font loading -->
<script>
  window.WebFontConfig = {
      custom: {
          families: ['Spoqa Han Sans:100,300,400,700'],
          urls: ['https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css']
      },
      timeout: 60000
  };
  (function(d) {
      var wf = d.createElement('script'), s = d.scripts[0];
      wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js';
      s.parentNode.insertBefore(wf, s);
  })(document);
</script>

  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link rel="stylesheet" type="text/css" href="/style.css" />
  <link rel="alternate" type="application/rss+xml" title="강병영 - 불환인지불기지 환기무능야" href="/feed.xml" />
  <link rel="shortcut icon" href="../images/circle-photoman.ico">

  <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
</head>
  <body>
    <div class="wrapper-masthead">
  <div class="container">
    <header class="masthead clearfix">
      
        <a href="/" class="site-avatar"><img src="https://lh3.googleusercontent.com/-LITB2XPacmw/XKDlAAeQ-mI/AAAAAAAAAC4/0RaeagHdwjABcaTOCYgvh1N9XO2lSijwwCEwYBhgLKs0DAL1OcqwASHNlJBabvWRNzO9amoXI9XMoKOgoY8eph6PZ8UibTzv4-gIuLE0FD3yOMfaIaGoG2KnNNOvoNjjTtbrPW-Qjj63-ddkYvDGrXkZ1sXGpO9yO_0tc04Ql-y_wy6H2aoqv53pYhdJ_TO50iRGKtdLPnvl4x3lwnH-rIR7hixpDyYNDNgH4stYLfQ337WdMi2Gk2VCKIOHv_xsArEciGmqE96BkjCgPUwsAIuotfOuOx14M7RpCHXG5xpAZcj6A00t0wDWu9Bp_Sr1lWvvmimYrUAXDiC2nYBejOLTMrgnUZ97OQVnMic0Mvm-BewUtk7PsVyfbQCO-C-gFzPvKPbh_OZJ5m_bWwsAI-mM-LF8sgO55oHKNO4ADdzbxUzl2VidrJCJjEXpn9N6lwsf4L3tudDExPEmm0VsQCBsqr5yMFKodFz6TnE8wVThfi1E1T1mjQfpR4J6-HiAdCPSOFMgIGuxUfZWIwMVa25AcQdlz8bvdX3_2hbxF1MBk02jei5lmI03AbdXFOl-36SJhZyzRYixcmJqW0xtvCqUCd_vb1xG_mdtw4TDQM_axEVjWCKSsChakvbRKSJojA2oO3vOMEFNgnQH_FJoww8mD9gU/w139-h140-p/photoman.png" /></a>
      

      <div class="site-info">
        <h1 class="site-name"><a href="/">강병영</a></h1>
        <p class="site-description">불환인지불기지 환기무능야</p>
      </div>

      <nav>
        
        
        <a href="/">Blog</a>
        
        
        
        <a href="/about">About</a>
        
        
        
        <a href="/archive">Archive</a>
        
        
        
        <a href="/tags">Tags</a>
        
        
      </nav>
    </header>
  </div>
</div>

    <div id="main" role="main" class="container">
      <article class="post">
  <h1>2020-06-06 현충일의 TIL</h1>

  <div>
    <span class="date">
      2020-06-06
    </span>

    <ul class="tag">
      
      <li>
        <a href="http://localhost:4000/tags#Swift">
          Swift
        </a>
      </li>
      
      <li>
        <a href="http://localhost:4000/tags#TIL">
          TIL
        </a>
      </li>
      
    </ul>
  </div>

  <div class="entry">
    <p>2020 6월 6일의 TIL.</p>

<h3 id="defer문">defer문</h3>
<p>Swift 2.0에서 추가된 구문으로 링크드리스트의 remove 파트를 공부하다가 알게 됨.<br />
컨텍스트 매니저처럼 현재 스코프를 벗어나는 시점에 동작할 것을 미리 정할 수 있게 해주는 구문.<br />
File Open이나 DB 혹은 Network 연결을 만들어 놓고 작업하는 중 예외를 만나도 안전하게 리소스를 닫을 수 있게 해주는 꿀떡 구문.<br />
defer문은 스코프 내에서 스택에 쌓이게 되어 여러 개의 defer문이 정의되어 있으면 LIFO로 실행된다고 함.</p>

<h3 id="sequence-collection-protocol">Sequence, Collection Protocol</h3>
<p>TIL로 정리하기엔 무리일 만큼 중요함.<br />
<strong>Swift의 정수라고도 볼 수 있는 <code class="highlighter-rouge">Array</code>타입의 핵심 프로토콜들이기 때문이다.</strong><br />
Sequence는 for-in 구문에 사용할 수 있게 순회할 수 있는 타입을 정의할 때 사용하고,
Collection은 Sequence를 상속하면서 임의의 인덱스로 특정 위치의 값에 접근할 수 있게 해준다는 점만 일단 기억.</p>
<blockquote>
  <p>Array, Sequence, Collection에 대한 더 자세한 내용은 따로 정리를 할 예정입니다.</p>
</blockquote>

<blockquote>
  <p>… 이것이 바로 프로토콜 지향 프로그래밍 패러다임의 강점이다. Objective-C의 프로토콜은 Java의 인터페이스 개념처럼 특정한 동작을 한다는 약속이며, 따라서 특정 메소드를 호출할 수 있다는 근거로 그것을 유사타입으로 사용하는 수준이었지만, Swift의 프로토콜은 표준 구현을 제공함으로써, 프로토콜의 논리적인 기본 요건을 만족하게 될 때 자동으로 해당 요건을 근거로 동작할 수 있는 기능들을 가져다 쓸 수 있게 된다…<br />- soooprmx님의 포스팅에서</p>
</blockquote>

<h3 id="cowcopy-on-write">Cow(Copy-on-Write)</h3>
<p>Swift의 Array는 값 타입이기 때문에 Array 인스턴스를 복사하게 되면 말 그대로 <code class="highlighter-rouge">새로운 공간을 추가로 할당해야 함</code>.
비효율적인 방식이지만 Value semantic을 유지함과 동시에 효율성을 높여주는 장치가 <code class="highlighter-rouge">CoW</code>.
처음 인스턴스를 복사하게 되면 레퍼런스를 할당해서 같은 인스턴스를 참조하게 되지만,<br />
<code class="highlighter-rouge">복사된 레퍼런스에 mutation이 발생하면 실제로 값을 복사하게 됨.</code></p>

<h3 id="isknownuniquelyreferenced">isKnownUniquelyReferenced</h3>
<p>CoW의 핵심 메서드.
파라미터로 받는 값이 inout 즉, 레퍼런스로서 해당 레퍼런스에 참조가 1개일 때는 true, 여러 개일 때는 false를 반환.
참고로 다중 스레드에서 동시에 접근하는 객체에 대해 isKnownUniquelyReferenced를 실행하면 true가 나올 수도 있음.
그래서 isKnownUniquelyReferenced를 검사할 때는 항상 동기화된 스레드 환경에서만 진행해야 함.</p>

<h1 id="reference">Reference</h1>
<ol>
  <li><a href="https://soooprmx.com/archives/6118">soooprmx 숩님 블로그 defer</a><br /></li>
  <li><a href="https://soooprmx.com/archives/7047">soooprmx 숩님 블로그 Sequence Protocol</a><br /></li>
  <li><a href="https://soooprmx.com/archives/7049">soooprmx 숩님 블로그 Collection Protocol</a><br /></li>
  <li><a href="https://oaksong.github.io/2018/01/06/copy-on-write/">OAKSONG님 블로그 CoW</a><br /></li>
  <li><a href="https://developer.apple.com/documentation/swift/2429905-isknownuniquelyreferenced">isKnownUniquelyReferenced 오피셜</a><br /></li>
</ol>

  </div>

  <div class="pagination">
    
      <span class="prev" >
          <a href="http://localhost:4000/ios-start-project/">
            &#xE000; 스토리보드없이 iOS 프로젝트를 시작할 때
          </a>
      </span>
    
    
  </div>

  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'https-rokang-kr-1';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          <!-- Refer to https://codepen.io/ruandre/pen/howFi -->
<ul class="svg-icon">

  

  

  
  <li><a href="mailto:bykang096@gmail.com" class="icon-8 email" title="Email"><svg viewBox="0 0 512 512"><path d="M101.3 141.6v228.9h0.3 308.4 0.8V141.6H101.3zM375.7 167.8l-119.7 91.5 -119.6-91.5H375.7zM127.6 194.1l64.1 49.1 -64.1 64.1V194.1zM127.8 344.2l84.9-84.9 43.2 33.1 43-32.9 84.7 84.7L127.8 344.2 127.8 344.2zM384.4 307.8l-64.4-64.4 64.4-49.3V307.8z"/></svg><!--[if lt IE 9]><em>Email</em><![endif]--></a></li>
  

  

  

  
  <li><a href="https://github.com/RoKang" class="icon-13 github" title="GitHub"><svg viewBox="0 0 512 512"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"/></svg><!--[if lt IE 9]><em>GitHub</em><![endif]--></a></li>
  

  

  

  

  

  

  

  

  

  

</ul>



<p>© 2017 Kiko Now</p>

        </footer>
      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-166875445-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/TIL/',
		  'title': '2020-06-06 현충일의 TIL'
		});
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
